<!-- 登录注册页面 -->
<view class="auth-page">
  <!-- 顶部背景 -->
  <view class="header-bg">
    <view class="header-content">
      <image class="logo" src="/miniprogram/images/logo.png" mode="aspectFit" />
      <view class="title-container">
        <text class="app-title">AI问财</text>
        <text class="app-subtitle">AI Portfolio Manager</text>
      </view>
    </view>
  </view>

  <!-- 登录注册卡片 -->
  <view class="auth-card">
    <!-- 选项卡 -->
    <t-tabs value="{{currentTab}}" bindchange="onTabChange">
      <t-tab-panel value="login" label="登录">
        <!-- 登录表单 -->
        <view class="form-container">
          <view class="form-group">
            <t-input 
              label="手机号"
              placeholder="请输入手机号"
              value="{{loginForm.phone}}"
              bind:change="onLoginPhoneChange"
              type="number"
              maxlength="11"
              clearable
            />
          </view>
          
          <view class="form-group">
            <t-input 
              label="密码"
              placeholder="请输入密码"
              value="{{loginForm.password}}"
              bind:change="onLoginPasswordChange"
              password
              clearable
            />
          </view>
          
          <view class="form-options">
            <t-checkbox 
              value="{{rememberMe}}" 
              bind:change="onRememberChange"
              label="记住密码"
            />
            <text class="forgot-password" bindtap="onForgotPassword">忘记密码？</text>
          </view>
          
          <view class="form-group">
            <t-button 
              theme="primary"
              size="large"
              bindtap="onLogin"
              loading="{{loginLoading}}"
              disabled="{{loginLoading}}"
              block
            >
              登录
            </t-button>
          </view>
          
          <t-divider content="或" />
          
          <view class="quick-login">
            <t-button 
              theme="default" 
              variant="outline"
              size="large"
              bindtap="onWechatLogin"
              block
              icon="wechat"
            >
              微信登录
            </t-button>
          </view>
        </view>
      </t-tab-panel>
      
      <t-tab-panel value="register" label="注册">
        <!-- 注册表单 -->
        <view class="form-container">
          <view class="form-group">
            <t-input 
              label="手机号"
              placeholder="请输入手机号"
              value="{{registerForm.phone}}"
              bind:change="onRegisterPhoneChange"
              type="number"
              maxlength="11"
              clearable
            />
          </view>
          
          <view class="form-group">
            <t-input 
              label="验证码"
              placeholder="请输入验证码"
              value="{{registerForm.code}}"
              bind:change="onRegisterCodeChange"
              type="number"
              maxlength="6"
              clearable
            >
              <t-button 
                slot="suffix"
                size="small"
                variant="text"
                bindtap="onSendCode"
                disabled="{{codeCountdown > 0}}"
              >
                {{codeCountdown > 0 ? codeCountdown + 's' : '获取验证码'}}
              </t-button>
            </t-input>
          </view>
          
          <view class="form-group">
            <t-input 
              label="密码"
              placeholder="请设置密码"
              value="{{registerForm.password}}"
              bind:change="onRegisterPasswordChange"
              password
              clearable
            />
          </view>
          
          <view class="form-group">
            <t-input 
              label="确认密码"
              placeholder="请确认密码"
              value="{{registerForm.confirmPassword}}"
              bind:change="onRegisterConfirmPasswordChange"
              password
              clearable
            />
          </view>
          
          <view class="form-group">
            <t-checkbox 
              value="{{agreedToTerms}}" 
              bind:change="onAgreeTermsChange"
            >
              我已阅读并同意
              <text class="link-text" bindtap="onViewTerms">《用户协议》</text>
              和
              <text class="link-text" bindtap="onViewPrivacy">《隐私政策》</text>
            </t-checkbox>
          </view>
          
          <view class="form-group">
            <t-button 
              theme="primary"
              size="large"
              bindtap="onRegister"
              loading="{{registerLoading}}"
              disabled="{{!agreedToTerms || registerLoading}}"
              block
            >
              注册
            </t-button>
          </view>
        </view>
      </t-tab-panel>
    </t-tabs>
    
    <!-- 体验AI助手按钮 -->
    <view class="try-ai-assistant">
      <t-button 
        theme="warning"
        variant="outline"
        size="large"
        bindtap="onTryAIAssistant"
        block
      >
        体验AI助手
      </t-button>
    </view>
  </view>
</view>
